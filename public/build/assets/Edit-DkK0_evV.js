import{d as V,r as b,w as B,c as f,b as o,u as s,h as F,e as n,f as t,i as r,t as m,z as N,q as p,o as _,F as h,j as T,C as M,B as O,l as R,v as j,m as w,a as q,x as L}from"./app-zceEsHJ0.js";import{D as y}from"./DeveloperRecommendationController-B7nZCR59.js";import{_ as z}from"./Heading.vue_vue_type_script_setup_true_lang-Cam_v4pF.js";import{_ as S}from"./InputError.vue_vue_type_script_setup_true_lang-B8Db0rPd.js";import{d as P,_ as k}from"./index-DB_XGDUr.js";import{_ as A,a as G}from"./CardContent.vue_vue_type_script_setup_true_lang-BXq8GHXQ.js";import{_ as H}from"./CardHeader.vue_vue_type_script_setup_true_lang-Dq9JKDvM.js";import{_ as D}from"./Label.vue_vue_type_script_setup_true_lang-CnMsaaRU.js";import{h as $,_ as I}from"./AppLayout.vue_vue_type_script_setup_true_lang-DQL6Uiit.js";import{T as J}from"./thumbs-up-DG75xrWo.js";import"./useForwardExpose-69XdW_7x.js";import"./index-BNxF7y-0.js";import"./TooltipTrigger.vue_vue_type_script_setup_true_lang-DSTKZO8D.js";import"./createLucideIcon-BcTsVLkY.js";import"./useForwardPropsEmits-BurJBUp9.js";import"./PopperContent-g9pRJxp3.js";import"./Collection-B-As6IPU.js";import"./Teleport--CePYlX6.js";import"./VisuallyHidden-CyNFWOY2.js";import"./index-CYocFbH6.js";import"./useTypeahead-BW9vDtnA.js";import"./RovingFocusGroup-mtgOdsSh.js";import"./utils-DFOM33Ye.js";import"./users-CJ-0RK9x.js";import"./chevrons-up-down-B51xlHsI.js";import"./SheetDescription.vue_vue_type_script_setup_true_lang-5P20ap5Q.js";import"./user-CzYV7n64.js";const K={class:"w-full space-y-6 rounded-xl p-4"},Q={class:"flex items-center gap-3"},W={class:"flex h-12 w-12 items-center justify-center rounded-xl bg-primary/10"},X={class:"mt-1 text-sm text-muted-foreground"},Y={class:"grid gap-2"},Z=["value"],ee={class:"grid gap-2"},te={class:"text-muted-foreground text-xs"},oe={class:"flex flex-wrap items-center gap-3"},se={class:"inline-flex items-center gap-1.5 rounded-md bg-green-500/10 px-2.5 py-1 text-sm font-medium text-green-700 dark:text-green-400"},Be=V({__name:"Edit",props:{recommendation:{},statusOptions:{}},setup(l){const d=l,a=b({status:d.recommendation.status,recommendation_note:d.recommendation.recommendation_note??""}),c=b(!1),g=L(),v=w(()=>g.props.errors??{}),x=w(()=>g.props.flash?.success),C=[{title:"Dashboard",href:P().url},{title:"Recommendations",href:$().url},{title:"Edit recommendation",href:y.edit.url(d.recommendation.id)}];B(()=>d.recommendation,u=>{a.value={status:u.status,recommendation_note:u.recommendation_note??""}},{immediate:!0});function E(){c.value=!0,q.put(y.update.url(d.recommendation.id),{status:a.value.status,recommendation_note:a.value.recommendation_note||null},{preserveScroll:!0,onFinish:()=>{c.value=!1}})}function U(u){return new Date(u).toLocaleString(void 0,{dateStyle:"short",timeStyle:"short"})}return(u,e)=>(_(),f(h,null,[o(s(F),{title:"Edit recommendation"}),o(I,{breadcrumbs:C},{default:n(()=>[t("div",K,[t("div",Q,[t("div",W,[o(s(J),{class:"h-6 w-6 text-primary"})]),t("div",null,[o(z,{title:"Edit recommendation",description:"Update status and note (super admin only)"})])]),o(s(A),{class:"lg:col-span-2"},{default:n(()=>[o(s(H),{class:"pb-4"},{default:n(()=>[e[4]||(e[4]=t("h3",{class:"text-sm font-medium text-muted-foreground"},"Recommendation details",-1)),t("p",X,[e[2]||(e[2]=r(" From ",-1)),t("strong",null,m(l.recommendation.recommender_name??"—"),1),e[3]||(e[3]=r(" to ",-1)),t("strong",null,m(l.recommendation.recommended_name??"—"),1),r(" · Created "+m(U(l.recommendation.created_at)),1)])]),_:1}),o(s(G),null,{default:n(()=>[t("form",{class:"space-y-6",onSubmit:N(E,["prevent"])},[t("div",Y,[o(s(D),{for:"status"},{default:n(()=>[...e[5]||(e[5]=[r("Status ",-1),t("span",{class:"text-destructive"},"*",-1)])]),_:1}),p(t("select",{id:"status","onUpdate:modelValue":e[0]||(e[0]=i=>a.value.status=i),required:"",class:"flex h-9 w-full rounded-md border border-input bg-background px-3 py-1 text-sm shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring"},[(_(!0),f(h,null,T(l.statusOptions,i=>(_(),f("option",{key:i.value,value:i.value},m(i.label),9,Z))),128))],512),[[M,a.value.status]]),o(S,{message:v.value.status},null,8,["message"])]),t("div",ee,[o(s(D),{for:"recommendation_note"},{default:n(()=>[...e[6]||(e[6]=[r("Note",-1)])]),_:1}),p(t("textarea",{id:"recommendation_note","onUpdate:modelValue":e[1]||(e[1]=i=>a.value.recommendation_note=i),rows:"4",maxlength:"2000",placeholder:"Optional admin note",class:"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},null,512),[[O,a.value.recommendation_note]]),o(S,{message:v.value.recommendation_note},null,8,["message"]),t("p",te,m(a.value.recommendation_note.length)+" / 2000 ",1)]),t("div",oe,[o(s(k),{type:"submit",disabled:c.value},{default:n(()=>[r(m(c.value?"Updating...":"Update recommendation"),1)]),_:1},8,["disabled"]),o(s(k),{variant:"outline","as-child":""},{default:n(()=>[o(s(R),{href:s($)().url},{default:n(()=>[...e[7]||(e[7]=[r("Cancel",-1)])]),_:1},8,["href"])]),_:1}),p(t("span",se,[e[8]||(e[8]=t("span",{class:"h-1.5 w-1.5 rounded-full bg-green-500"},null,-1)),r(" "+m(x.value),1)],512),[[j,x.value]])])],32)]),_:1})]),_:1})])]),_:1})],64))}});export{Be as default};
