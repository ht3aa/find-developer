import{d as E,r as b,w as D,a as N,c as u,b as t,u as e,h as A,e as a,f as l,o as i,t as d,g as v,i as m,F as y,j as B,k,n as w,l as T}from"./app-C6o3Ch6j.js";import{i as C,s as z,_ as F}from"./AppLayout.vue_vue_type_script_setup_true_lang-CyHJxXkj.js";import{_ as I}from"./Input.vue_vue_type_script_setup_true_lang-BQjk7bJ2.js";import{_ as Q,a as U,b as S,c,d as q,e as f}from"./TableRow.vue_vue_type_script_setup_true_lang-R9SaQR_0.js";import{_ as G}from"./Pagination.vue_vue_type_script_setup_true_lang-CkkNG4dx.js";import{r as H,d as J}from"./index-Q8BmCPXc.js";import{S as K}from"./search-BfQC3gHV.js";import{C as M}from"./copy-DQwiElK-.js";import{E as O}from"./external-link-CzrVOe9G.js";import{C as P}from"./users-B-K1ZFk2.js";import"./index-BQL40kDy.js";import"./TooltipTrigger.vue_vue_type_script_setup_true_lang-CJ6WO0rn.js";import"./createLucideIcon-C_9afv_H.js";import"./useForwardPropsEmits-DZclxPgZ.js";import"./useForwardExpose-BAE7mqHy.js";import"./PopperContent-CFCj-H3i.js";import"./Collection-DHyiiBnW.js";import"./Teleport-BAn8sglj.js";import"./VisuallyHidden-B7YMIQ_p.js";import"./index-6qIwvjwm.js";import"./useTypeahead-ouXeri0-.js";import"./RovingFocusGroup-C7w8pUop.js";import"./utils-ClACu254.js";import"./chevrons-up-down-Duv55X7F.js";import"./SheetDescription.vue_vue_type_script_setup_true_lang-Dc01ovxy.js";import"./user-D9h-j4Rt.js";import"./thumbs-up-CXG5NN4I.js";import"./chevron-left-DQSPt06M.js";const R={class:"flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-4"},W={class:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between"},X={class:"relative flex-1 sm:max-w-sm"},Y={key:0,class:"text-sm text-muted-foreground"},Z={key:0,class:"rounded-md border"},ee={key:0},te={key:1},se=["title","onClick"],re={class:"truncate"},ae={key:1},oe={key:1,class:"flex flex-col items-center justify-center rounded-xl border border-dashed py-12"},le={class:"text-center text-sm text-muted-foreground"},ze=E({__name:"Index",props:{activities:{},filters:{default:()=>({search:"",log_name:""})}},setup(n){const h=n,x=b(h.filters.search??""),$=H(x,300),g=b(null);let _=null;async function j(o){try{await navigator.clipboard.writeText(o),g.value=o,_&&clearTimeout(_),_=setTimeout(()=>{g.value=null},1500)}catch{}}D($,o=>{N.get(C().url,{search:o||void 0,log_name:h.filters.log_name||void 0},{preserveState:!0,preserveScroll:!0,replace:!0})});function V(o){return new Date(o).toLocaleString(void 0,{dateStyle:"short",timeStyle:"short"})}function p(o){return o?o==="created"?"default":o==="updated"?"outline":o==="deleted"?"destructive":"secondary":"secondary"}const L=[{title:"Dashboard",href:J().url},{title:"Activity Log",href:C().url}];return(o,s)=>(i(),u(y,null,[t(e(A),{title:"Activity Log"}),t(F,{breadcrumbs:L},{default:a(()=>[l("div",R,[s[8]||(s[8]=l("div",{class:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between"},[l("div",null,[l("h1",{class:"text-2xl font-semibold tracking-tight"}," Activity Log "),l("p",{class:"text-muted-foreground"}," Audit trail of model changes (super admin only) ")])],-1)),l("div",W,[l("div",X,[t(e(K),{class:"absolute left-3 top-1/2 size-4 -translate-y-1/2 text-muted-foreground"}),t(e(I),{modelValue:x.value,"onUpdate:modelValue":s[0]||(s[0]=r=>x.value=r),type:"search",placeholder:"Search description, subject, event...",class:"pl-9"},null,8,["modelValue"])]),n.activities.total>0?(i(),u("p",Y," Showing "+d(n.activities.from)+"–"+d(n.activities.to)+" of "+d(n.activities.total),1)):v("",!0)]),n.activities.data.length>0?(i(),u("div",Z,[t(e(Q),null,{default:a(()=>[t(e(U),null,{default:a(()=>[t(e(S),null,{default:a(()=>[t(e(c),{class:"w-[140px]"},{default:a(()=>[...s[1]||(s[1]=[m("Date",-1)])]),_:1}),t(e(c),{class:"w-[90px]"},{default:a(()=>[...s[2]||(s[2]=[m("Event",-1)])]),_:1}),t(e(c),{class:"w-[120px]"},{default:a(()=>[...s[3]||(s[3]=[m("Subject",-1)])]),_:1}),t(e(c),{class:"w-[180px]"},{default:a(()=>[...s[4]||(s[4]=[m("Causer email",-1)])]),_:1}),t(e(c),{class:"w-[80px]"},{default:a(()=>[...s[5]||(s[5]=[m("Log",-1)])]),_:1}),t(e(c),{class:"w-[70px]"})]),_:1})]),_:1}),t(e(q),null,{default:a(()=>[(i(!0),u(y,null,B(n.activities.data,r=>(i(),k(e(S),{key:r.id},{default:a(()=>[t(e(f),{class:"text-muted-foreground text-sm whitespace-nowrap"},{default:a(()=>[m(d(V(r.created_at)),1)]),_:2},1024),t(e(f),null,{default:a(()=>[l("span",{class:w(["inline-flex items-center rounded-md px-2 py-0.5 text-xs font-medium",p(r.event)==="default"&&"bg-primary text-primary-foreground",p(r.event)==="outline"&&"border border-input bg-background",p(r.event)==="destructive"&&"bg-destructive/10 text-destructive",p(r.event)==="secondary"&&"bg-muted text-muted-foreground"])},d(r.event??"—"),3)]),_:2},1024),t(e(f),{class:"text-muted-foreground text-sm"},{default:a(()=>[r.subject_type?(i(),u("span",ee,d(r.subject_type)+" #"+d(r.subject_id),1)):(i(),u("span",te,"—"))]),_:2},1024),t(e(f),{class:"text-muted-foreground text-sm"},{default:a(()=>[r.causer_email?(i(),u("span",{key:0,class:"group flex cursor-pointer items-center gap-1.5 rounded px-1.5 py-0.5 transition-colors hover:bg-muted/80",title:`Copy ${r.causer_email}`,onClick:ie=>j(r.causer_email)},[l("span",re,d(r.causer_email),1),t(e(M),{class:w(["size-3.5 shrink-0 opacity-60 group-hover:opacity-100",{"text-green-600 dark:text-green-400":g.value===r.causer_email}])},null,8,["class"])],8,se)):(i(),u("span",ae,"—"))]),_:2},1024),t(e(f),{class:"text-muted-foreground text-xs"},{default:a(()=>[m(d(r.log_name??"default"),1)]),_:2},1024),t(e(f),null,{default:a(()=>[t(e(T),{href:e(z)(r.id).url,class:"inline-flex items-center gap-1 text-sm text-primary hover:underline"},{default:a(()=>[s[6]||(s[6]=m(" View ",-1)),t(e(O),{class:"size-3.5"})]),_:1},8,["href"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])):(i(),u("div",oe,[t(e(P),{class:"mb-4 h-12 w-12 text-muted-foreground"}),s[7]||(s[7]=l("h3",{class:"mb-2 text-lg font-semibold"},"No activity yet",-1)),l("p",le,d(n.filters.search??""?"No entries match your search.":"Activity will appear here as models are changed."),1)])),n.activities.links?.length?(i(),k(G,{key:2,links:n.activities.links},null,8,["links"])):v("",!0)])]),_:1})],64))}});export{ze as default};
