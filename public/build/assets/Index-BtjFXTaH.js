import{d as D,o as a,k as d,e as r,b as o,u as e,f,l as v,i as k,g,s as _,c,F as y,j as h,m as $,x as W,h as B,t as C,a as R}from"./app-DRlGJjbd.js";import{W as j}from"./WorkExperienceController-BDv4QOcd.js";import{u as T,F,g as M}from"./index-Ce4CkX4M.js";import{_ as S,a as K,d as Y,e as N,b as w,c as I}from"./TableRow.vue_vue_type_script_setup_true_lang-BsY2W4sl.js";import{_ as z}from"./index-xp-sZ1RL.js";import{_ as E,d as H}from"./index-BbUGV_Ht.js";import{a as J,b as L,c as P,d as O,x as q,y as A,_ as G}from"./AppLayout.vue_vue_type_script_setup_true_lang-Dc7fCOYU.js";import{E as Q,T as U}from"./trash-2-D_kvdbi8.js";import{P as X}from"./pencil-Chbogj5y.js";import{P as V}from"./plus-DJixZ2Nj.js";import{B as Z}from"./users-DVio33dQ.js";import"./index-Cvnjx7oV.js";import"./TooltipTrigger.vue_vue_type_script_setup_true_lang-doRbKIyw.js";import"./useForwardPropsEmits-CkZ0zBeE.js";import"./useForwardExpose-DPMjJAZB.js";import"./PopperContent-DZSoTm_K.js";import"./Collection-BJTvdJtI.js";import"./Teleport-d49ctEAJ.js";import"./createLucideIcon-D4V8T7U7.js";import"./VisuallyHidden-ChzsOgMv.js";import"./index-BWkaSrJu.js";import"./useTypeahead-Do-PqZrg.js";import"./RovingFocusGroup-CAdCIRzb.js";import"./utils-DhEok29L.js";import"./chevrons-up-down-D3vmTKvY.js";import"./SheetDescription.vue_vue_type_script_setup_true_lang-Dz_GFx_Z.js";import"./user-ubbJT-Fl.js";import"./file-text-Bq2uIWYL.js";import"./thumbs-up-C_La06Vo.js";const ee=D({__name:"WorkExperienceActionsCell",props:{workExperience:{},onDelete:{type:Function},can:{}},setup(n){const i=n,t=()=>i.can?.updateDeveloperCompany!==!1,l=()=>i.can?.deleteDeveloperCompany!==!1,m=()=>t()||l();return(p,s)=>m()?(a(),d(e(O),{key:0},{default:r(()=>[o(e(J),{"as-child":""},{default:r(()=>[o(e(E),{variant:"ghost",size:"icon",class:"h-8 w-8"},{default:r(()=>[s[1]||(s[1]=f("span",{class:"sr-only"},"Open menu",-1)),o(e(Q),{class:"h-4 w-4"})]),_:1})]),_:1}),o(e(L),{align:"end"},{default:r(()=>[t()?(a(),d(e(P),{key:0,"as-child":""},{default:r(()=>[o(e(v),{href:e(j).edit.url(n.workExperience.id)},{default:r(()=>[o(e(X),{class:"mr-2 h-4 w-4"}),s[2]||(s[2]=k(" Edit ",-1))]),_:1},8,["href"])]),_:1})):g("",!0),l()?(a(),d(e(P),{key:1,class:"text-destructive focus:text-destructive",onClick:s[0]||(s[0]=b=>n.onDelete(n.workExperience))},{default:r(()=>[o(e(U),{class:"mr-2 h-4 w-4"}),s[3]||(s[3]=k(" Delete ",-1))]),_:1})):g("",!0)]),_:1})]),_:1})):g("",!0)}});function te(n,i,t){const l=new Date(n).getFullYear();if(t||!i)return`${l} – Present`;const m=new Date(i).getFullYear();return`${l} – ${m}`}function re(n,i={}){return[{accessorKey:"company_name",header:"Company",cell:({row:t})=>_("div",{class:"font-medium"},t.original.company_name)},{accessorKey:"job_title",header:"Job Title",cell:({row:t})=>_("div",{class:"text-muted-foreground"},t.original.job_title??"—")},{id:"promotion_from",header:"Promotion From",cell:({row:t})=>{const l=t.original.parent;return l?_("div",{class:"text-muted-foreground text-sm"},`${l.job_title??"N/A"} (${l.company_name})`):_("div",{class:"text-muted-foreground"},"—")}},{id:"date_range",header:"Period",cell:({row:t})=>_("div",{class:"text-muted-foreground"},te(t.original.start_date,t.original.end_date,t.original.is_current))},{accessorKey:"show_company",header:"Visible",cell:({row:t})=>_(z,{variant:t.original.show_company?"default":"secondary"},()=>t.original.show_company?"Yes":"No")},{id:"actions",header:"",cell:({row:t})=>_(ee,{workExperience:t.original,onDelete:n,can:i})}]}const oe={class:"rounded-md border"},se=D({__name:"WorkExperienceDataTable",props:{data:{},onDelete:{type:Function}},setup(n){const i=n,t=W(),l=$(()=>({...t.props.auth?.can??{},...t.props.can??{}})),m=$(()=>re(i.onDelete,l.value)),p=T({get data(){return i.data},get columns(){return m.value},getCoreRowModel:M()});return(s,b)=>(a(),c("div",oe,[o(e(S),null,{default:r(()=>[o(e(K),null,{default:r(()=>[(a(!0),c(y,null,h(e(p).getHeaderGroups(),x=>(a(),d(e(w),{key:x.id},{default:r(()=>[(a(!0),c(y,null,h(x.headers,u=>(a(),d(e(I),{key:u.id,colspan:u.colSpan},{default:r(()=>[u.column.columnDef.header?(a(),d(e(F),{key:0,render:u.column.columnDef.header,props:u.getContext()},null,8,["render","props"])):g("",!0)]),_:2},1032,["colspan"]))),128))]),_:2},1024))),128))]),_:1}),o(e(Y),null,{default:r(()=>[e(p).getRowModel().rows?.length?(a(!0),c(y,{key:0},h(e(p).getRowModel().rows,x=>(a(),d(e(w),{key:x.id,"data-state":x.getIsSelected()?"selected":void 0},{default:r(()=>[(a(!0),c(y,null,h(x.getVisibleCells(),u=>(a(),d(e(N),{key:u.id},{default:r(()=>[o(e(F),{render:u.column.columnDef.cell,props:u.getContext()},null,8,["render","props"])]),_:2},1024))),128))]),_:2},1032,["data-state"]))),128)):(a(),d(e(w),{key:1},{default:r(()=>[o(e(N),{colspan:m.value.length,class:"h-24 text-center"},{default:r(()=>[...b[0]||(b[0]=[k(" No results. ",-1)])]),_:1},8,["colspan"])]),_:1}))]),_:1})]),_:1})]))}}),ae={class:"flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-4"},ne={key:0,class:"rounded-lg border border-green-200 bg-green-50 px-4 py-3 text-sm font-medium text-green-800 dark:border-green-800 dark:bg-green-950/50 dark:text-green-200"},le={key:1,class:"rounded-lg border border-red-200 bg-red-50 px-4 py-3 text-sm font-medium text-red-800 dark:border-red-800 dark:bg-red-950/50 dark:text-red-200"},ie={class:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between"},de={key:3,class:"flex flex-col items-center justify-center rounded-xl border border-dashed py-12"},Se=D({__name:"Index",props:{workExperiences:{}},setup(n){const i=W(),t=$(()=>i.props.flash),l=[{title:"Dashboard",href:H().url},{title:"Work Experience",href:q().url}];function m(p){window.confirm(`Are you sure you want to delete your experience at "${p.company_name}"?`)&&R.delete(j.destroy.url(p.id),{preserveScroll:!0})}return(p,s)=>(a(),c(y,null,[o(e(B),{title:"Work Experience"}),o(G,{breadcrumbs:l},{default:r(()=>[f("div",ae,[t.value?.success?(a(),c("div",ne,C(t.value.success),1)):g("",!0),t.value?.error?(a(),c("div",le,C(t.value.error),1)):g("",!0),f("div",ie,[s[1]||(s[1]=f("div",null,[f("h1",{class:"text-2xl font-semibold tracking-tight"}," Work Experience "),f("p",{class:"text-muted-foreground"}," Manage your work history and professional experience ")],-1)),o(e(E),{"as-child":""},{default:r(()=>[o(e(v),{href:e(A)().url},{default:r(()=>[o(e(V),{class:"mr-2 h-4 w-4"}),s[0]||(s[0]=k(" Add Experience ",-1))]),_:1},8,["href"])]),_:1})]),n.workExperiences.length>0?(a(),d(se,{key:2,data:n.workExperiences,"on-delete":m},null,8,["data"])):(a(),c("div",de,[o(e(Z),{class:"mb-4 h-12 w-12 text-muted-foreground"}),s[3]||(s[3]=f("h3",{class:"mb-2 text-lg font-semibold"},"No work experience yet",-1)),s[4]||(s[4]=f("p",{class:"mb-4 text-center text-sm text-muted-foreground"}," Add your first work experience to showcase your professional background. ",-1)),o(e(E),{"as-child":""},{default:r(()=>[o(e(v),{href:e(A)().url},{default:r(()=>[o(e(V),{class:"mr-2 h-4 w-4"}),s[2]||(s[2]=k(" Add Experience ",-1))]),_:1},8,["href"])]),_:1})]))])]),_:1})],64))}});export{Se as default};
