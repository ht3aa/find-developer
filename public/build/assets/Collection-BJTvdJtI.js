import{a3 as $,a8 as P,r as h,m as N,a9 as R,w,K as U,O as j,d as C,S as _,s as I,L as D,G as k,H as L}from"./app-DRlGJjbd.js";import{x as F,S as T}from"./index-BbUGV_Ht.js";import{h as K,i as W,j as b}from"./useForwardExpose-DPMjJAZB.js";function q(e,t){const l=typeof e=="string"&&!t?`${e}Context`:t,r=Symbol(l);return[o=>{const s=$(r,o);if(s||s===null)return s;throw new Error(`Injection \`${r.toString()}\` not found. Component must be used within ${Array.isArray(e)?`one of the following components: ${e.join(", ")}`:`\`${e}\``}`)},o=>(P(r,o),o)]}function Q(){let e=document.activeElement;if(e==null)return null;for(;e!=null&&e.shadowRoot!=null&&e.shadowRoot.activeElement!=null;)e=e.shadowRoot.activeElement;return e}function X(e){return e==null}const[z]=q("ConfigProvider");function Z(e){const t=z({dir:h("ltr")});return N(()=>e?.value||t.dir?.value||"ltr")}function ee(e,t="reka"){return e||`${t}-${R?.()}`}function B(e,t){const l=h(e);function r(c){return t[l.value][c]??l.value}return{state:l,dispatch:c=>{l.value=r(c)}}}function G(e,t){const l=h({}),r=h("none"),i=h(e),c=e.value?"mounted":"unmounted";let o;const s=t.value?.ownerDocument.defaultView??K,{state:v,dispatch:u}=B(c,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}}),n=a=>{if(W){const d=new CustomEvent(a,{bubbles:!1,cancelable:!1});t.value?.dispatchEvent(d)}};w(e,async(a,d)=>{const S=d!==a;if(await U(),S){const g=r.value,y=M(t.value);a?(u("MOUNT"),n("enter"),y==="none"&&n("after-enter")):y==="none"||y==="undefined"||l.value?.display==="none"?(u("UNMOUNT"),n("leave"),n("after-leave")):d&&g!==y?(u("ANIMATION_OUT"),n("leave")):(u("UNMOUNT"),n("after-leave"))}},{immediate:!0});const m=a=>{const d=M(t.value),S=d.includes(CSS.escape(a.animationName)),g=v.value==="mounted"?"enter":"leave";if(a.target===t.value&&S&&(n(`after-${g}`),u("ANIMATION_END"),!i.value)){const y=t.value.style.animationFillMode;t.value.style.animationFillMode="forwards",o=s?.setTimeout(()=>{t.value?.style.animationFillMode==="forwards"&&(t.value.style.animationFillMode=y)})}a.target===t.value&&d==="none"&&u("ANIMATION_END")},p=a=>{a.target===t.value&&(r.value=M(t.value))},A=w(t,(a,d)=>{a?(l.value=getComputedStyle(a),a.addEventListener("animationstart",p),a.addEventListener("animationcancel",m),a.addEventListener("animationend",m)):(u("ANIMATION_END"),o!==void 0&&s?.clearTimeout(o),d?.removeEventListener("animationstart",p),d?.removeEventListener("animationcancel",m),d?.removeEventListener("animationend",m))},{immediate:!0}),f=w(v,()=>{const a=M(t.value);r.value=v.value==="mounted"?a:"none"});return j(()=>{A(),f()}),{isPresent:N(()=>["mounted","unmountSuspended"].includes(v.value))}}function M(e){return e&&getComputedStyle(e).animationName||"none"}var te=C({name:"Presence",props:{present:{type:Boolean,required:!0},forceMount:{type:Boolean}},slots:{},setup(e,{slots:t,expose:l}){const{present:r,forceMount:i}=_(e),c=h(),{isPresent:o}=G(r,c);l({present:o});let s=t.default({present:o.value});s=F(s||[]);const v=D();if(s&&s?.length>1){const u=v?.parent?.type.name?`<${v.parent.type.name} />`:"component";throw new Error([`Detected an invalid children for \`${u}\` for  \`Presence\` component.`,"","Note: Presence works similarly to `v-if` directly, but it waits for animation/transition to finished before unmounting. So it expect only one direct child of valid VNode type.","You can apply a few solutions:",["Provide a single child element so that `presence` directive attach correctly.","Ensure the first child is an actual element instead of a raw text node or comment node."].map(n=>`  - ${n}`).join(`
`)].join(`
`))}return()=>i.value||r.value||o.value?I(t.default({present:o.value})[0],{ref:u=>{const n=b(u);return typeof n?.hasAttribute>"u"||(n?.hasAttribute("data-reka-popper-content-wrapper")?c.value=n.firstElementChild:c.value=n),n}}):null}});function x(){const e=h(),t=N(()=>["#text","#comment"].includes(e.value?.$el.nodeName)?e.value?.$el.nextElementSibling:b(e));return{primitiveElement:e,currentElement:t}}const O="data-reka-collection-item";function ne(e={}){const{key:t="",isProvider:l=!1}=e,r=`${t}CollectionProvider`;let i;if(l){const n=h(new Map);i={collectionRef:h(),itemMap:n},P(r,i)}else i=$(r);const c=(n=!1)=>{const m=i.collectionRef.value;if(!m)return[];const p=Array.from(m.querySelectorAll(`[${O}]`)),f=Array.from(i.itemMap.value.values()).sort((E,a)=>p.indexOf(E.ref)-p.indexOf(a.ref));return n?f:f.filter(E=>E.ref.dataset.disabled!=="")},o=C({name:"CollectionSlot",inheritAttrs:!1,setup(n,{slots:m,attrs:p}){const{primitiveElement:A,currentElement:f}=x();return w(f,()=>{i.collectionRef.value=f.value}),()=>I(T,{ref:A,...p},m)}}),s=C({name:"CollectionItem",inheritAttrs:!1,props:{value:{validator:()=>!0}},setup(n,{slots:m,attrs:p}){const{primitiveElement:A,currentElement:f}=x();return k(E=>{if(f.value){const a=L(f.value);i.itemMap.value.set(a,{ref:f.value,value:n.value}),E(()=>i.itemMap.value.delete(a))}}),()=>I(T,{...p,[O]:"",ref:A},m)}}),v=N(()=>Array.from(i.itemMap.value.values())),u=N(()=>i.itemMap.value.size);return{getItems:c,reactiveItems:v,itemMapSize:u,CollectionSlot:o,CollectionItem:s}}export{te as P,Z as a,ee as b,q as c,X as d,x as e,Q as g,z as i,ne as u};
