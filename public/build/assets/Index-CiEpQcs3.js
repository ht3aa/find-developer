import{s as a,l as C,d as K,c,b as l,u as e,e as n,F as y,j as v,k as p,i as U,m as k,o as r,g as b,x as M,r as A,w as I,a as N,h as z,f as u,t as h}from"./app-DRlGJjbd.js";import{U as P}from"./UserController-C09Q1oi6.js";import{_ as G}from"./Pagination.vue_vue_type_script_setup_true_lang-C6jA7s-3.js";import{u as H,F as V,g as L}from"./index-Ce4CkX4M.js";import{_ as O,a as Q,d as Y,e as T,b as w,c as q}from"./TableRow.vue_vue_type_script_setup_true_lang-BsY2W4sl.js";import{_ as $}from"./index-xp-sZ1RL.js";import{_ as D,r as J,d as W}from"./index-BbUGV_Ht.js";import{c as j,a as X,b as Z,d as ee,u as E,v as R,_ as se}from"./AppLayout.vue_vue_type_script_setup_true_lang-Dc7fCOYU.js";import{P as te}from"./pencil-Chbogj5y.js";import{T as re,E as ae}from"./trash-2-D_kvdbi8.js";import{_ as le}from"./Input.vue_vue_type_script_setup_true_lang-C3r7H-b2.js";import{P as B}from"./plus-DJixZ2Nj.js";import{S as F}from"./search-D4iH83BL.js";import{a as oe}from"./users-DVio33dQ.js";import"./chevron-left-BiIdDqqD.js";import"./createLucideIcon-D4V8T7U7.js";import"./file-text-Bq2uIWYL.js";import"./index-Cvnjx7oV.js";import"./TooltipTrigger.vue_vue_type_script_setup_true_lang-doRbKIyw.js";import"./useForwardPropsEmits-CkZ0zBeE.js";import"./useForwardExpose-DPMjJAZB.js";import"./PopperContent-DZSoTm_K.js";import"./Collection-BJTvdJtI.js";import"./Teleport-d49ctEAJ.js";import"./VisuallyHidden-ChzsOgMv.js";import"./index-BWkaSrJu.js";import"./useTypeahead-Do-PqZrg.js";import"./RovingFocusGroup-CAdCIRzb.js";import"./utils-DhEok29L.js";import"./chevrons-up-down-D3vmTKvY.js";import"./SheetDescription.vue_vue_type_script_setup_true_lang-Dz_GFx_Z.js";import"./user-ubbJT-Fl.js";import"./thumbs-up-C_La06Vo.js";function ne(o,g={},x){return[{accessorKey:"name",header:"Name",cell:({row:t})=>a("div",{class:"font-medium"},t.original.name)},{accessorKey:"email",header:"Email",cell:({row:t})=>a("div",{class:"text-muted-foreground"},t.original.email)},{accessorKey:"user_type_label",header:"Type",cell:({row:t})=>a($,{variant:"secondary"},()=>t.original.user_type_label)},{accessorKey:"can_access_admin_panel",header:"Admin",cell:({row:t})=>a($,{variant:t.original.can_access_admin_panel?"default":"secondary"},()=>t.original.can_access_admin_panel?"Yes":"No")},{accessorKey:"roles",header:"Roles",cell:({row:t})=>{const d=t.original.roles;return d?.length?a("div",{class:"flex flex-wrap gap-1"},d.map(m=>a($,{key:m.id,variant:"outline",class:"text-xs"},()=>m.name))):a("span",{class:"text-muted-foreground"},"—")}},{id:"actions",header:"",cell:({row:t})=>{const d=g.updateUser!==!1,m=g.deleteUser!==!1&&t.original.id!==x;if(!d&&!m)return null;const _=[d?a(j,{asChild:!0},()=>a(C,{href:P.edit.url(t.original.id)},()=>[a(te,{class:"mr-2 h-4 w-4"}),"Edit"])):null,m?a(j,{class:"text-destructive focus:text-destructive",onClick:()=>o(t.original)},()=>[a(re,{class:"mr-2 h-4 w-4"}),"Delete"]):null].filter(Boolean);return a(ee,null,{default:()=>[a(X,{asChild:!0},()=>a(D,{variant:"ghost",size:"icon",class:"h-8 w-8"},()=>[a("span",{class:"sr-only"},"Open menu"),a(ae,{class:"h-4 w-4"})])),a(Z,{align:"end"},()=>_)]})}}]}const de={class:"rounded-md border"},ie=K({__name:"UsersDataTable",props:{data:{},onDelete:{type:Function}},setup(o){const g=o,x=M(),t=k(()=>({...x.props.auth?.can??{},...x.props.can??{}})),d=k(()=>x.props.auth?.user?.id),m=k(()=>ne(g.onDelete,t.value,d.value)),_=H({get data(){return g.data},get columns(){return m.value},getCoreRowModel:L()});return(S,f)=>(r(),c("div",de,[l(e(O),null,{default:n(()=>[l(e(Q),null,{default:n(()=>[(r(!0),c(y,null,v(e(_).getHeaderGroups(),s=>(r(),p(e(w),{key:s.id},{default:n(()=>[(r(!0),c(y,null,v(s.headers,i=>(r(),p(e(q),{key:i.id,colspan:i.colSpan},{default:n(()=>[i.column.columnDef.header?(r(),p(e(V),{key:0,render:i.column.columnDef.header,props:i.getContext()},null,8,["render","props"])):b("",!0)]),_:2},1032,["colspan"]))),128))]),_:2},1024))),128))]),_:1}),l(e(Y),null,{default:n(()=>[e(_).getRowModel().rows?.length?(r(!0),c(y,{key:0},v(e(_).getRowModel().rows,s=>(r(),p(e(w),{key:s.id,"data-state":s.getIsSelected()?"selected":void 0},{default:n(()=>[(r(!0),c(y,null,v(s.getVisibleCells(),i=>(r(),p(e(T),{key:i.id},{default:n(()=>[l(e(V),{render:i.column.columnDef.cell,props:i.getContext()},null,8,["render","props"])]),_:2},1024))),128))]),_:2},1032,["data-state"]))),128)):(r(),p(e(w),{key:1},{default:n(()=>[l(e(T),{colspan:m.value.length,class:"h-24 text-center"},{default:n(()=>[...f[0]||(f[0]=[U(" No results. ",-1)])]),_:1},8,["colspan"])]),_:1}))]),_:1})]),_:1})]))}}),ue={class:"flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-4"},ce={key:0,class:"rounded-lg border border-green-200 bg-green-50 px-4 py-3 text-sm font-medium text-green-800 dark:border-green-800 dark:bg-green-950/50 dark:text-green-200"},me={key:1,class:"rounded-lg border border-red-200 bg-red-50 px-4 py-3 text-sm font-medium text-red-800 dark:border-red-800 dark:bg-red-950/50 dark:text-red-200"},fe={class:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between"},pe={class:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between"},ge={class:"relative flex-1 sm:max-w-sm"},xe={key:0,class:"text-sm text-muted-foreground"},_e={key:3,class:"flex flex-col items-center justify-center rounded-xl border border-dashed py-12"},he={key:4,class:"flex flex-col items-center justify-center rounded-xl border border-dashed py-12"},Xe=K({__name:"Index",props:{users:{},filters:{default:()=>({search:""})}},setup(o){const g=o,x=M(),t=k(()=>x.props.flash),d=A(g.filters.search??""),m=J(d,300);I(m,f=>{N.get(E().url,{search:f||void 0},{preserveState:!0,preserveScroll:!0,replace:!0})});function _(f){window.confirm(`Are you sure you want to delete "${f.name}"?`)&&N.delete(P.destroy.url(f.id),{preserveScroll:!0})}const S=[{title:"Dashboard",href:W().url},{title:"Users",href:E().url}];return(f,s)=>(r(),c(y,null,[l(e(z),{title:"Users"}),l(se,{breadcrumbs:S},{default:n(()=>[u("div",ue,[t.value?.success?(r(),c("div",ce,h(t.value.success),1)):b("",!0),t.value?.error?(r(),c("div",me,h(t.value.error),1)):b("",!0),u("div",fe,[s[2]||(s[2]=u("div",null,[u("h1",{class:"text-2xl font-semibold tracking-tight"},"Users"),u("p",{class:"text-muted-foreground"}," Manage users and their roles ")],-1)),l(e(D),{"as-child":""},{default:n(()=>[l(e(C),{href:e(R)().url},{default:n(()=>[l(e(B),{class:"mr-2 h-4 w-4"}),s[1]||(s[1]=U(" Add User ",-1))]),_:1},8,["href"])]),_:1})]),u("div",pe,[u("div",ge,[l(e(F),{class:"absolute left-3 top-1/2 size-4 -translate-y-1/2 text-muted-foreground"}),l(e(le),{modelValue:d.value,"onUpdate:modelValue":s[0]||(s[0]=i=>d.value=i),type:"search",placeholder:"Search by name, email...",class:"pl-9"},null,8,["modelValue"])]),o.users.total>0?(r(),c("p",xe," Showing "+h(o.users.from)+"–"+h(o.users.to)+" of "+h(o.users.total),1)):b("",!0)]),o.users.data.length>0?(r(),p(ie,{key:2,data:o.users.data,"on-delete":_},null,8,["data"])):o.filters.search??""?(r(),c("div",he,[l(e(F),{class:"mb-4 h-12 w-12 text-muted-foreground"}),s[6]||(s[6]=u("h3",{class:"mb-2 text-lg font-semibold"},"No users found",-1)),s[7]||(s[7]=u("p",{class:"text-center text-sm text-muted-foreground"}," Try adjusting your search. ",-1))])):(r(),c("div",_e,[l(e(oe),{class:"mb-4 h-12 w-12 text-muted-foreground"}),s[4]||(s[4]=u("h3",{class:"mb-2 text-lg font-semibold"},"No users yet",-1)),s[5]||(s[5]=u("p",{class:"mb-4 text-center text-sm text-muted-foreground"}," Get started by creating your first user. ",-1)),l(e(D),{"as-child":""},{default:n(()=>[l(e(C),{href:e(R)().url},{default:n(()=>[l(e(B),{class:"mr-2 h-4 w-4"}),s[3]||(s[3]=U(" Add User ",-1))]),_:1},8,["href"])]),_:1})])),o.users.links?.length?(r(),p(G,{key:5,links:o.users.links},null,8,["links"])):b("",!0)])]),_:1})],64))}});export{Xe as default};
