import{d as B,w as D,c,b as t,u as a,h as E,e as r,f as s,z as F,i as u,q as _,B as N,o as v,F as V,j as P,t as b,C as T,g as M,l as O,v as j,r as w,m as $,a as q,x as L}from"./app-CTXhN_DD.js";import{D as z}from"./DeveloperBlogController-BFTLCiHd.js";import{_ as R}from"./Heading.vue_vue_type_script_setup_true_lang-B5GrkMLB.js";import{_ as n}from"./InputError.vue_vue_type_script_setup_true_lang-DlZ9A6Dr.js";import{d as W,_ as S}from"./index-CtIM-YXN.js";import{_ as A,a as G}from"./CardContent.vue_vue_type_script_setup_true_lang-BbhxGuyJ.js";import{_ as H}from"./CardHeader.vue_vue_type_script_setup_true_lang-DR8uvVJa.js";import{_ as x}from"./Input.vue_vue_type_script_setup_true_lang-DGFdw2jy.js";import{_ as m}from"./Label.vue_vue_type_script_setup_true_lang-Bq2sqdMg.js";import{_ as I}from"./RichTextEditor.vue_vue_type_script_setup_true_lang-piwREcwY.js";import{e as C,g as J,_ as K}from"./AppLayout.vue_vue_type_script_setup_true_lang-BONrrEI_.js";import{F as Q}from"./TooltipTrigger.vue_vue_type_script_setup_true_lang-758HNZ80.js";import"./index-xCt7-ikg.js";import"./useForwardExpose-Bb7kC5__.js";import"./quote-DyRJszjD.js";import"./createLucideIcon-BaJBaHHz.js";import"./Collection-q_i2iukm.js";import"./useForwardPropsEmits-DGZADwI-.js";import"./PopperContent-DpH8GgGx.js";import"./Teleport-C8Arf6ko.js";import"./index-DJUsg1Wc.js";import"./useTypeahead-qtu6dVHp.js";import"./RovingFocusGroup-Ca-YQUim.js";import"./utils-0l-pEcOX.js";import"./users-CAI0lB_n.js";import"./chevrons-up-down-CCv1JHDk.js";import"./SheetDescription.vue_vue_type_script_setup_true_lang-DDHzECxQ.js";import"./user-BG8BgwSA.js";import"./thumbs-up-DXAEi90O.js";import"./VisuallyHidden-BN9bvjfC.js";const X={class:"w-full space-y-6 rounded-xl p-4"},Y={class:"flex items-center gap-3"},Z={class:"flex h-12 w-12 items-center justify-center rounded-xl bg-primary/10"},ee={class:"grid gap-2"},te={class:"grid gap-2"},se={class:"grid gap-2"},ae={class:"grid gap-2"},le={key:0,class:"grid gap-2 sm:grid-cols-2"},oe={class:"grid gap-2"},ie=["value"],re={class:"grid gap-2"},ue={class:"flex flex-wrap items-center gap-3"},de={class:"inline-flex items-center gap-1.5 rounded-md bg-green-500/10 px-2.5 py-1 text-sm font-medium text-green-700 dark:text-green-400"},Le=B({__name:"Edit",props:{blog:{},statusOptions:{},canChangeStatus:{type:Boolean}},setup(p){const f=p,o=w({title:"",excerpt:"",content:"",featured_image:"",status:"draft",published_at:""}),g=w(!1),h=L(),d=$(()=>h.props.errors??{}),y=$(()=>h.props.flash?.success),U=[{title:"Dashboard",href:W().url},{title:"Blogs",href:C().url},{title:f.blog.title,href:J(f.blog.id).url}];D(()=>f.blog,i=>{o.value={title:i.title,excerpt:i.excerpt??"",content:i.content,featured_image:i.featured_image??"",status:i.status,published_at:i.published_at??""}},{immediate:!0});function k(){const i=o.value,e={title:i.title,excerpt:i.excerpt||null,content:i.content,featured_image:i.featured_image||null};f.canChangeStatus&&(e.status=i.status,e.published_at=i.published_at||null),g.value=!0,q.put(z.update.url(f.blog.id),e,{preserveScroll:!0,onFinish:()=>{g.value=!1}})}return(i,e)=>(v(),c(V,null,[t(a(E),{title:`Edit ${p.blog.title}`},null,8,["title"]),t(K,{breadcrumbs:U},{default:r(()=>[s("div",X,[s("div",Y,[s("div",Z,[t(a(Q),{class:"h-6 w-6 text-primary"})]),s("div",null,[t(R,{title:`Edit ${p.blog.title}`,description:"Update your post"},null,8,["title"])])]),t(a(A),{class:"lg:col-span-2"},{default:r(()=>[t(a(H),{class:"pb-4"},{default:r(()=>[...e[6]||(e[6]=[s("h3",{class:"text-sm font-medium text-muted-foreground"},"Post details",-1)])]),_:1}),t(a(G),null,{default:r(()=>[s("form",{class:"space-y-6",onSubmit:F(k,["prevent"])},[s("div",ee,[t(a(m),{for:"title"},{default:r(()=>[...e[7]||(e[7]=[u("Title ",-1),s("span",{class:"text-destructive"},"*",-1)])]),_:1}),t(a(x),{id:"title",modelValue:o.value.title,"onUpdate:modelValue":e[0]||(e[0]=l=>o.value.title=l),required:"",placeholder:"Post title",class:"transition-colors focus-visible:ring-2"},null,8,["modelValue"]),t(n,{message:d.value.title},null,8,["message"])]),s("div",te,[t(a(m),{for:"excerpt"},{default:r(()=>[...e[8]||(e[8]=[u("Excerpt",-1)])]),_:1}),_(s("textarea",{id:"excerpt","onUpdate:modelValue":e[1]||(e[1]=l=>o.value.excerpt=l),rows:"2",placeholder:"Short summary",class:"flex min-h-[60px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},null,512),[[N,o.value.excerpt]]),t(n,{message:d.value.excerpt},null,8,["message"])]),s("div",se,[t(a(m),{for:"content"},{default:r(()=>[...e[9]||(e[9]=[u("Content ",-1),s("span",{class:"text-destructive"},"*",-1)])]),_:1}),t(I,{modelValue:o.value.content,"onUpdate:modelValue":e[2]||(e[2]=l=>o.value.content=l),placeholder:"Write your postâ€¦"},null,8,["modelValue"]),t(n,{message:d.value.content},null,8,["message"])]),s("div",ae,[t(a(m),{for:"featured_image"},{default:r(()=>[...e[10]||(e[10]=[u("Featured image (path)",-1)])]),_:1}),t(a(x),{id:"featured_image",modelValue:o.value.featured_image,"onUpdate:modelValue":e[3]||(e[3]=l=>o.value.featured_image=l),placeholder:"Optional path or URL"},null,8,["modelValue"]),t(n,{message:d.value.featured_image},null,8,["message"])]),p.canChangeStatus?(v(),c("div",le,[s("div",oe,[t(a(m),{for:"status"},{default:r(()=>[...e[11]||(e[11]=[u("Status",-1)])]),_:1}),_(s("select",{id:"status","onUpdate:modelValue":e[4]||(e[4]=l=>o.value.status=l),class:"flex h-9 w-full rounded-md border border-input bg-background px-3 py-1 text-sm shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring"},[(v(!0),c(V,null,P(p.statusOptions,l=>(v(),c("option",{key:l.value,value:l.value},b(l.label),9,ie))),128))],512),[[T,o.value.status]]),t(n,{message:d.value.status},null,8,["message"])]),s("div",re,[t(a(m),{for:"published_at"},{default:r(()=>[...e[12]||(e[12]=[u("Published at",-1)])]),_:1}),t(a(x),{id:"published_at",modelValue:o.value.published_at,"onUpdate:modelValue":e[5]||(e[5]=l=>o.value.published_at=l),type:"datetime-local"},null,8,["modelValue"]),t(n,{message:d.value.published_at},null,8,["message"])])])):M("",!0),s("div",ue,[t(a(S),{type:"submit",disabled:g.value},{default:r(()=>[u(b(g.value?"Updating...":"Update post"),1)]),_:1},8,["disabled"]),t(a(S),{variant:"outline","as-child":""},{default:r(()=>[t(a(O),{href:a(C)().url},{default:r(()=>[...e[13]||(e[13]=[u("Cancel",-1)])]),_:1},8,["href"])]),_:1}),_(s("span",de,[e[14]||(e[14]=s("span",{class:"h-1.5 w-1.5 rounded-full bg-green-500"},null,-1)),u(" "+b(y.value),1)],512),[[j,y.value]])])],32)]),_:1})]),_:1})])]),_:1})],64))}});export{Le as default};
