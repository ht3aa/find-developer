import{s as p,l as T,d as O,c as v,f as o,t as k,u as e,b as t,e as s,i as n,g as V,F as D,j as M,k as S,q as K,C as W,z as X,m as C,r as w,o as i,a as B,x as Z,w as P,h as ie,D as ne}from"./app-Cr4cZbV0.js";import{u as de,F as q,g as ue}from"./index-xiVPYDx2.js";import{_ as me,a as ce,d as fe,e as H,b as z,c as pe}from"./TableRow.vue_vue_type_script_setup_true_lang-dZkCaRR3.js";import{_,r as ge,d as ve}from"./index-C9bkr0Hk.js";import{_ as ee,a as le,b as te,c as ae}from"./DialogTitle.vue_vue_type_script_setup_true_lang-Wc7MTHes.js";import{_ as se}from"./DialogDescription.vue_vue_type_script_setup_true_lang-Cwh5H4Xn.js";import{_ as re}from"./DialogFooter.vue_vue_type_script_setup_true_lang-Ctv0v-c5.js";import{_ as R}from"./Input.vue_vue_type_script_setup_true_lang-Ci1azhgK.js";import{_ as U}from"./Label.vue_vue_type_script_setup_true_lang-CW21cOrA.js";import{D as be}from"./DeveloperController-BB9-PsDW.js";import{_ as L}from"./index-xR75hIaM.js";import{P as xe}from"./pencil-D-pQaHrd.js";import{E as ye}from"./external-link-BK653drS.js";import{M as oe,C as ke}from"./mail-CdXJ7H4q.js";import{_ as _e}from"./Pagination.vue_vue_type_script_setup_true_lang-DMqpPlNY.js";import{j as I,d as he,a as we,b as Se,c as $e,k as Q,_ as je}from"./AppLayout.vue_vue_type_script_setup_true_lang-CU__CkDB.js";import{P as G}from"./plus-C0wlOFiM.js";import{S as J}from"./search-CJ7f6uw9.js";import{U as Ee}from"./users-qlgCV8ii.js";import"./useForwardPropsEmits-v4F4VgYV.js";import"./index-DQrTv73z.js";import"./useForwardExpose-fg6_ptvU.js";import"./Collection-Cl_18bzU.js";import"./Teleport-CG-IN_x4.js";import"./createLucideIcon-C-5Zx-L0.js";import"./SheetDescription.vue_vue_type_script_setup_true_lang-0qdhqHj7.js";import"./index-CTJd_y2o.js";import"./chevron-left-DcGQ55dJ.js";import"./file-text-Dzln-l9S.js";import"./TooltipTrigger.vue_vue_type_script_setup_true_lang-CSi-Ryd7.js";import"./PopperContent-D7CgFtWH.js";import"./VisuallyHidden-BFf5OQFi.js";import"./useTypeahead-DYn91dzN.js";import"./RovingFocusGroup-CxoV4kmX.js";import"./utils-C-i8Khj_.js";import"./chevrons-up-down-CeAOkJDn.js";import"./user-RHuYzi-n.js";import"./thumbs-up-DzZ6ipPf.js";const Y="size-4 shrink-0 rounded-[4px] border border-input accent-primary focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50";function Ce(d){return d==="approved"?"default":d==="rejected"?"destructive":"secondary"}function Ve(d={}){return[{id:"select",header:({table:r})=>{const x=r.getIsAllRowsSelected(),g=r.getIsSomeRowsSelected()&&!x;return p("input",{type:"checkbox",class:Y,checked:x,ref:b=>{const u=b;u&&(u.indeterminate=g)},"aria-label":"Select all",onChange:b=>{const u=b.target;r.toggleAllRowsSelected(u.checked)}})},cell:({row:r})=>p("input",{type:"checkbox",class:Y,checked:r.getIsSelected(),"aria-label":"Select row",onChange:x=>{const g=x.target;r.toggleSelected(g.checked)}}),enableSorting:!1,enableHiding:!1},{accessorKey:"name",header:"Name",cell:({row:r})=>p("div",{class:"font-medium"},r.original.name)},{accessorKey:"email",header:"Email",cell:({row:r})=>p("div",{class:"text-muted-foreground"},r.original.email)},{accessorKey:"job_title",header:"Job Title",cell:({row:r})=>p("div",{class:"text-muted-foreground"},r.original.job_title??"—")},{accessorKey:"years_of_experience",header:"Experience",cell:({row:r})=>p("span",{class:"text-muted-foreground"},`${r.original.years_of_experience} yrs`)},{accessorKey:"status",header:"Status",cell:({row:r})=>p(L,{variant:Ce(r.original.status)},()=>r.original.status_label)},{accessorKey:"is_available",header:"Available",cell:({row:r})=>p(L,{variant:r.original.is_available?"default":"secondary"},()=>r.original.is_available?"Yes":"No")},{id:"actions",header:"",cell:({row:r})=>{const x=be.edit.url(r.original.id),g=r.original.profile_url,b=d.updateDeveloper!==!1,u=d.viewDeveloper!==!1&&g,y=[b?p(_,{variant:"ghost",size:"icon",class:"h-8 w-8",asChild:!0},()=>p(T,{href:x,"aria-label":`Edit ${r.original.name}`},()=>p(xe,{class:"h-4 w-4"}))):null,u?p(_,{variant:"ghost",size:"icon",class:"h-8 w-8",asChild:!0},()=>p(T,{href:g,target:"_blank",rel:"noopener noreferrer","aria-label":`View ${r.original.name}`},()=>p(ye,{class:"h-4 w-4"}))):null].filter(Boolean);return y.length===0?null:p("div",{class:"flex items-center gap-1"},y)}}]}const De={class:"space-y-3"},Ue={key:0,class:"flex flex-wrap items-center gap-3 rounded-md border bg-muted/50 px-4 py-2"},Me={class:"text-muted-foreground text-sm"},Re={class:"rounded-md border"},Ne={class:"grid gap-2"},Ae={class:"grid gap-2"},Be={class:"grid gap-2"},Te=O({__name:"DevelopersDataTable",props:{data:{},bulkEmailUrl:{default:""}},setup(d){const r=d,x=Z(),g=C(()=>({...x.props.auth?.can??{},...x.props.can??{}})),b=C(()=>Ve(g.value)),u=w({}),y=de({get data(){return r.data},get columns(){return b.value},getCoreRowModel:ue(),getRowId:l=>String(l.id),state:{get rowSelection(){return u.value}},onRowSelectionChange:l=>{u.value=typeof l=="function"?l(u.value):l},enableRowSelection:!0}),N=C(()=>(u.value,y.getSelectedRowModel().rows)),A=C(()=>N.value.length),$=C(()=>A.value>0),m=w(!1),c=w({title:"",subject:"",category:""}),j=w(!1);function F(){c.value={title:"",subject:"",category:""},m.value=!0}function E(){if(!r.bulkEmailUrl)return;const l=N.value.map(a=>a.original.id);j.value=!0,B.post(r.bulkEmailUrl,{developer_ids:l,title:c.value.title,subject:c.value.subject,category:c.value.category},{preserveScroll:!0,onSuccess:()=>{m.value=!1,u.value={}},onFinish:()=>{j.value=!1}})}return(l,a)=>(i(),v("div",De,[$.value?(i(),v("div",Ue,[o("span",Me,k(A.value)+" of "+k(e(y).getRowModel().rows.length)+" row(s) selected. ",1),t(e(_),{variant:"secondary",size:"sm",onClick:F},{default:s(()=>[t(e(oe),{class:"mr-2 h-4 w-4"}),a[5]||(a[5]=n(" Send Mailtrap email ",-1))]),_:1})])):V("",!0),o("div",Re,[t(e(me),null,{default:s(()=>[t(e(ce),null,{default:s(()=>[(i(!0),v(D,null,M(e(y).getHeaderGroups(),f=>(i(),S(e(z),{key:f.id},{default:s(()=>[(i(!0),v(D,null,M(f.headers,h=>(i(),S(e(pe),{key:h.id,colspan:h.colSpan},{default:s(()=>[h.column.columnDef.header?(i(),S(e(q),{key:0,render:h.column.columnDef.header,props:h.getContext()},null,8,["render","props"])):V("",!0)]),_:2},1032,["colspan"]))),128))]),_:2},1024))),128))]),_:1}),t(e(fe),null,{default:s(()=>[e(y).getRowModel().rows?.length?(i(!0),v(D,{key:0},M(e(y).getRowModel().rows,f=>(i(),S(e(z),{key:f.id,"data-state":f.getIsSelected()?"selected":void 0},{default:s(()=>[(i(!0),v(D,null,M(f.getVisibleCells(),h=>(i(),S(e(H),{key:h.id},{default:s(()=>[t(e(q),{render:h.column.columnDef.cell,props:h.getContext()},null,8,["render","props"])]),_:2},1024))),128))]),_:2},1032,["data-state"]))),128)):(i(),S(e(z),{key:1},{default:s(()=>[t(e(H),{colspan:b.value.length,class:"h-24 text-center"},{default:s(()=>[...a[6]||(a[6]=[n(" No results. ",-1)])]),_:1},8,["colspan"])]),_:1}))]),_:1})]),_:1})]),t(e(ee),{open:m.value,"onUpdate:open":a[4]||(a[4]=f=>m.value=f)},{default:s(()=>[t(e(le),{class:"sm:max-w-md"},{default:s(()=>[t(e(te),null,{default:s(()=>[t(e(ae),null,{default:s(()=>[...a[7]||(a[7]=[n("Send Mailtrap email",-1)])]),_:1}),t(e(se),null,{default:s(()=>[...a[8]||(a[8]=[n(" Send an email to each selected developer. Title is used as the email body heading. ",-1)])]),_:1})]),_:1}),o("form",{class:"grid gap-4 py-4",onSubmit:X(E,["prevent"])},[o("div",Ne,[t(e(U),{for:"bulk-email-title"},{default:s(()=>[...a[9]||(a[9]=[n("Title",-1)])]),_:1}),t(e(R),{id:"bulk-email-title",modelValue:c.value.title,"onUpdate:modelValue":a[0]||(a[0]=f=>c.value.title=f),placeholder:"Email title / heading",required:""},null,8,["modelValue"])]),o("div",Ae,[t(e(U),{for:"bulk-email-subject"},{default:s(()=>[...a[10]||(a[10]=[n("Subject",-1)])]),_:1}),K(o("textarea",{id:"bulk-email-subject","onUpdate:modelValue":a[1]||(a[1]=f=>c.value.subject=f),rows:"3",placeholder:"Email subject line",required:"",class:"flex min-h-[80px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring"},null,512),[[W,c.value.subject]])]),o("div",Be,[t(e(U),{for:"bulk-email-category"},{default:s(()=>[...a[11]||(a[11]=[n("Category",-1)])]),_:1}),t(e(R),{id:"bulk-email-category",modelValue:c.value.category,"onUpdate:modelValue":a[2]||(a[2]=f=>c.value.category=f),placeholder:"e.g. Newsletter, Notification"},null,8,["modelValue"])]),t(e(re),null,{default:s(()=>[t(e(_),{type:"button",variant:"outline",onClick:a[3]||(a[3]=f=>m.value=!1)},{default:s(()=>[...a[12]||(a[12]=[n(" Cancel ",-1)])]),_:1}),t(e(_),{type:"submit",disabled:j.value},{default:s(()=>[n(k(j.value?"Sending…":"Send"),1)]),_:1},8,["disabled"])]),_:1})],32)]),_:1})]),_:1},8,["open"])]))}}),Fe={class:"flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-4"},ze={key:0,class:"rounded-lg border border-green-200 bg-green-50 px-4 py-3 text-sm font-medium text-green-800 dark:border-green-800 dark:bg-green-950/50 dark:text-green-200"},Ie={key:1,class:"rounded-lg border border-red-200 bg-red-50 px-4 py-3 text-sm font-medium text-red-800 dark:border-red-800 dark:bg-red-950/50 dark:text-red-200"},Ke={class:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between"},Pe={class:"flex items-center gap-2"},qe={class:"grid gap-2"},He={class:"grid gap-2"},Le={class:"grid gap-2"},Qe={class:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between"},Ge={class:"flex flex-1 gap-2 sm:max-w-md"},Je={class:"relative flex-1"},Ye=["value"],Oe={key:0,class:"text-sm text-muted-foreground"},We={key:3,class:"flex flex-col items-center justify-center rounded-xl border border-dashed py-12"},Xe={key:4,class:"flex flex-col items-center justify-center rounded-xl border border-dashed py-12"},Tl=O({__name:"Index",props:{developers:{},filters:{default:()=>({search:"",status:""})},bulkEmailUrl:{},bulkEmailAllUrl:{}},setup(d){const r=d,x=Z(),g=C(()=>x.props.flash),b=w(r.filters.search??""),u=w(r.filters.status??"all"),y=ge(b,300);P(y,E=>{B.get(I().url,{search:E||void 0,status:u.value||void 0},{preserveState:!0,preserveScroll:!0,replace:!0})}),P(u,E=>{B.get(I().url,{status:E||void 0,search:y.value||void 0},{preserveState:!0,preserveScroll:!0,replace:!0})});const N=[{title:"Dashboard",href:ve().url},{title:"Developers",href:I().url}],A=[{value:"",label:"All Statuses"},{value:"pending",label:"Pending"},{value:"approved",label:"Approved"},{value:"rejected",label:"Rejected"},{value:"experience_changed",label:"Experience Changed"}],$=w(!1),m=w({title:"",subject:"",category:""}),c=w(!1);function j(){m.value={title:"",subject:"",category:""},$.value=!0}function F(){r.bulkEmailAllUrl&&(c.value=!0,B.post(r.bulkEmailAllUrl,{title:m.value.title,subject:m.value.subject,category:m.value.category},{preserveScroll:!0,onSuccess:()=>{$.value=!1},onFinish:()=>{c.value=!1}}))}return(E,l)=>(i(),v(D,null,[t(e(ie),{title:"Developers"}),t(je,{breadcrumbs:N},{default:s(()=>[o("div",Fe,[g.value?.success?(i(),v("div",ze,k(g.value.success),1)):V("",!0),g.value?.error?(i(),v("div",Ie,k(g.value.error),1)):V("",!0),o("div",Ke,[l[10]||(l[10]=o("div",null,[o("h1",{class:"text-2xl font-semibold tracking-tight"},"Developers"),o("p",{class:"text-muted-foreground"}," View and manage all developers in the platform ")],-1)),o("div",Pe,[t(e(he),null,{default:s(()=>[t(e(we),{"as-child":""},{default:s(()=>[t(e(_),{variant:"outline"},{default:s(()=>[l[7]||(l[7]=n(" Bulk actions ",-1)),t(e(ke),{class:"ml-2 h-4 w-4"})]),_:1})]),_:1}),t(e(Se),{align:"end"},{default:s(()=>[t(e($e),{onSelect:j},{default:s(()=>[t(e(oe),{class:"mr-2 h-4 w-4"}),l[8]||(l[8]=n(" Send Mailtrap email ",-1))]),_:1})]),_:1})]),_:1}),t(e(_),{"as-child":""},{default:s(()=>[t(e(T),{href:e(Q)().url},{default:s(()=>[t(e(G),{class:"mr-2 h-4 w-4"}),l[9]||(l[9]=n(" Add Developer ",-1))]),_:1},8,["href"])]),_:1})])]),t(e(ee),{open:$.value,"onUpdate:open":l[4]||(l[4]=a=>$.value=a)},{default:s(()=>[t(e(le),{class:"sm:max-w-md"},{default:s(()=>[t(e(te),null,{default:s(()=>[t(e(ae),null,{default:s(()=>[...l[11]||(l[11]=[n("Send Mailtrap email",-1)])]),_:1}),t(e(se),null,{default:s(()=>[...l[12]||(l[12]=[n(" Send an email to all developers in the system. Title is used as the email body heading. ",-1)])]),_:1})]),_:1}),o("form",{class:"grid gap-4 py-4",onSubmit:X(F,["prevent"])},[o("div",qe,[t(e(U),{for:"bulk-email-title"},{default:s(()=>[...l[13]||(l[13]=[n("Title",-1)])]),_:1}),t(e(R),{id:"bulk-email-title",modelValue:m.value.title,"onUpdate:modelValue":l[0]||(l[0]=a=>m.value.title=a),placeholder:"Email title / heading",required:""},null,8,["modelValue"])]),o("div",He,[t(e(U),{for:"bulk-email-subject"},{default:s(()=>[...l[14]||(l[14]=[n("Subject",-1)])]),_:1}),K(o("textarea",{id:"bulk-email-subject","onUpdate:modelValue":l[1]||(l[1]=a=>m.value.subject=a),rows:"3",placeholder:"Email subject line",required:"",class:"flex min-h-[80px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring"},null,512),[[W,m.value.subject]])]),o("div",Le,[t(e(U),{for:"bulk-email-category"},{default:s(()=>[...l[15]||(l[15]=[n("Category",-1)])]),_:1}),t(e(R),{id:"bulk-email-category",modelValue:m.value.category,"onUpdate:modelValue":l[2]||(l[2]=a=>m.value.category=a),placeholder:"e.g. Newsletter, Notification"},null,8,["modelValue"])]),t(e(re),null,{default:s(()=>[t(e(_),{type:"button",variant:"outline",onClick:l[3]||(l[3]=a=>$.value=!1)},{default:s(()=>[...l[16]||(l[16]=[n(" Cancel ",-1)])]),_:1}),t(e(_),{type:"submit",disabled:c.value},{default:s(()=>[n(k(c.value?"Sending…":"Send"),1)]),_:1},8,["disabled"])]),_:1})],32)]),_:1})]),_:1},8,["open"]),o("div",Qe,[o("div",Ge,[o("div",Je,[t(e(J),{class:"absolute left-3 top-1/2 size-4 -translate-y-1/2 text-muted-foreground"}),t(e(R),{modelValue:b.value,"onUpdate:modelValue":l[5]||(l[5]=a=>b.value=a),type:"search",placeholder:"Search by name, email...",class:"pl-9"},null,8,["modelValue"])]),K(o("select",{"onUpdate:modelValue":l[6]||(l[6]=a=>u.value=a),class:"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 sm:w-[180px]"},[l[17]||(l[17]=o("option",{value:"",disabled:""},"Select status",-1)),(i(),v(D,null,M(A,a=>o("option",{key:a.value,value:a.value},k(a.label),9,Ye)),64))],512),[[ne,u.value]])]),d.developers.total>0?(i(),v("p",Oe," Showing "+k(d.developers.from)+"–"+k(d.developers.to)+" of "+k(d.developers.total),1)):V("",!0)]),d.developers.data.length>0?(i(),S(Te,{key:2,data:d.developers.data,"bulk-email-url":d.bulkEmailUrl},null,8,["data","bulk-email-url"])):d.filters.search??""?(i(),v("div",Xe,[t(e(J),{class:"mb-4 h-12 w-12 text-muted-foreground"}),l[21]||(l[21]=o("h3",{class:"mb-2 text-lg font-semibold"},"No developers found",-1)),l[22]||(l[22]=o("p",{class:"text-center text-sm text-muted-foreground"}," Try adjusting your search. ",-1))])):(i(),v("div",We,[t(e(Ee),{class:"mb-4 h-12 w-12 text-muted-foreground"}),l[19]||(l[19]=o("h3",{class:"mb-2 text-lg font-semibold"},"No developers yet",-1)),l[20]||(l[20]=o("p",{class:"mb-4 text-center text-sm text-muted-foreground"}," Get started by adding your first developer. ",-1)),t(e(_),{"as-child":""},{default:s(()=>[t(e(T),{href:e(Q)().url},{default:s(()=>[t(e(G),{class:"mr-2 h-4 w-4"}),l[18]||(l[18]=n(" Add Developer ",-1))]),_:1},8,["href"])]),_:1})])),d.developers.links?.length?(i(),S(_e,{key:5,links:d.developers.links},null,8,["links"])):V("",!0)])]),_:1})],64))}});export{Tl as default};
