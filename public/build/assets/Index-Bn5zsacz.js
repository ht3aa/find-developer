import{s as r,l as y,d as B,c as u,b as o,u as e,e as a,F as x,j as h,k as f,i as k,m as v,o as s,g as w,x as F,h as T,f as c,t as $,a as A}from"./app-CRw3-p0n.js";import{R as P}from"./RoleController-C5zLzXuw.js";import{u as M,F as D,g as j}from"./index-eZaz95Aq.js";import{_ as K,a as I,d as q,e as N,b,c as z}from"./TableRow.vue_vue_type_script_setup_true_lang-0rAJcHu9.js";import{_ as C,d as G}from"./index-YUdjfNlU.js";import{c as S,a as H,b as L,d as O,q as U,r as E,_ as J}from"./AppLayout.vue_vue_type_script_setup_true_lang-CKM9mFgs.js";import{P as Q}from"./pencil-DgbWHGFr.js";import{T as W,E as X}from"./trash-2-Cyea9LMI.js";import{P as V}from"./plus-K17TAD2N.js";import{S as Y}from"./users-BJvktpYV.js";import"./index-CxyJPG2X.js";import"./TooltipTrigger.vue_vue_type_script_setup_true_lang-B7YQwo9Z.js";import"./createLucideIcon-CZ3KoMzD.js";import"./useForwardPropsEmits-DZbuhTEu.js";import"./useForwardExpose-BJkOkH-4.js";import"./PopperContent-BL2ktdEK.js";import"./Collection-uSGNX8c4.js";import"./Teleport-DQ513N3r.js";import"./VisuallyHidden-wTvmLbDE.js";import"./index-D6k88Q50.js";import"./useTypeahead-ai5RrIpQ.js";import"./RovingFocusGroup-HdiJtpdt.js";import"./utils-Dwb1dSJa.js";import"./chevrons-up-down-D3DlT39k.js";import"./SheetDescription.vue_vue_type_script_setup_true_lang-DaJ1geIF.js";import"./user-5lurQomp.js";import"./thumbs-up-CtdE1A4C.js";function Z(p,i={}){return[{accessorKey:"name",header:"Name",cell:({row:t})=>r("div",{class:"font-medium"},t.original.name)},{accessorKey:"guard_name",header:"Guard",cell:({row:t})=>r("div",{class:"text-muted-foreground font-mono text-sm"},t.original.guard_name)},{accessorKey:"users_count",header:"Users",cell:({row:t})=>r("span",{class:"text-muted-foreground"},String(t.original.users_count??0))},{id:"actions",header:"",cell:({row:t})=>{const g=i.updateRole!==!1,m=i.deleteRole!==!1;if(!g&&!m)return null;const n=[g?r(S,{asChild:!0},()=>r(y,{href:P.edit.url(t.original.id)},()=>[r(Q,{class:"mr-2 h-4 w-4"}),"Edit"])):null,m?r(S,{class:"text-destructive focus:text-destructive",onClick:()=>p(t.original)},()=>[r(W,{class:"mr-2 h-4 w-4"}),"Delete"]):null].filter(Boolean);return r(O,null,{default:()=>[r(H,{asChild:!0},()=>r(C,{variant:"ghost",size:"icon",class:"h-8 w-8"},()=>[r("span",{class:"sr-only"},"Open menu"),r(X,{class:"h-4 w-4"})])),r(L,{align:"end"},()=>n)]})}}]}const ee={class:"rounded-md border"},te=B({__name:"RolesDataTable",props:{data:{},onDelete:{type:Function}},setup(p){const i=p,t=F(),g=v(()=>({...t.props.auth?.can??{},...t.props.can??{}})),m=v(()=>Z(i.onDelete,g.value)),n=M({get data(){return i.data},get columns(){return m.value},getCoreRowModel:j()});return(l,R)=>(s(),u("div",ee,[o(e(K),null,{default:a(()=>[o(e(I),null,{default:a(()=>[(s(!0),u(x,null,h(e(n).getHeaderGroups(),_=>(s(),f(e(b),{key:_.id},{default:a(()=>[(s(!0),u(x,null,h(_.headers,d=>(s(),f(e(z),{key:d.id,colspan:d.colSpan},{default:a(()=>[d.column.columnDef.header?(s(),f(e(D),{key:0,render:d.column.columnDef.header,props:d.getContext()},null,8,["render","props"])):w("",!0)]),_:2},1032,["colspan"]))),128))]),_:2},1024))),128))]),_:1}),o(e(q),null,{default:a(()=>[e(n).getRowModel().rows?.length?(s(!0),u(x,{key:0},h(e(n).getRowModel().rows,_=>(s(),f(e(b),{key:_.id,"data-state":_.getIsSelected()?"selected":void 0},{default:a(()=>[(s(!0),u(x,null,h(_.getVisibleCells(),d=>(s(),f(e(N),{key:d.id},{default:a(()=>[o(e(D),{render:d.column.columnDef.cell,props:d.getContext()},null,8,["render","props"])]),_:2},1024))),128))]),_:2},1032,["data-state"]))),128)):(s(),f(e(b),{key:1},{default:a(()=>[o(e(N),{colspan:m.value.length,class:"h-24 text-center"},{default:a(()=>[...R[0]||(R[0]=[k(" No results. ",-1)])]),_:1},8,["colspan"])]),_:1}))]),_:1})]),_:1})]))}}),se={class:"flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-4"},re={key:0,class:"rounded-lg border border-green-200 bg-green-50 px-4 py-3 text-sm font-medium text-green-800 dark:border-green-800 dark:bg-green-950/50 dark:text-green-200"},oe={key:1,class:"rounded-lg border border-red-200 bg-red-50 px-4 py-3 text-sm font-medium text-red-800 dark:border-red-800 dark:bg-red-950/50 dark:text-red-200"},ae={class:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between"},le={key:3,class:"flex flex-col items-center justify-center rounded-xl border border-dashed py-12"},Pe=B({__name:"Index",props:{roles:{}},setup(p){const i=F(),t=v(()=>i.props.flash);function g(n){window.confirm(`Are you sure you want to delete the role "${n.name}"?`)&&A.delete(P.destroy.url(n.id),{preserveScroll:!0})}const m=[{title:"Dashboard",href:G().url},{title:"Roles",href:U().url}];return(n,l)=>(s(),u(x,null,[o(e(T),{title:"Roles"}),o(J,{breadcrumbs:m},{default:a(()=>[c("div",se,[t.value?.success?(s(),u("div",re,$(t.value.success),1)):w("",!0),t.value?.error?(s(),u("div",oe,$(t.value.error),1)):w("",!0),c("div",ae,[l[1]||(l[1]=c("div",null,[c("h1",{class:"text-2xl font-semibold tracking-tight"},"Roles"),c("p",{class:"text-muted-foreground"}," Create and manage roles to assign to users ")],-1)),o(e(C),{"as-child":""},{default:a(()=>[o(e(y),{href:e(E)().url},{default:a(()=>[o(e(V),{class:"mr-2 h-4 w-4"}),l[0]||(l[0]=k(" Add Role ",-1))]),_:1},8,["href"])]),_:1})]),p.roles.length>0?(s(),f(te,{key:2,data:p.roles,"on-delete":g},null,8,["data"])):(s(),u("div",le,[o(e(Y),{class:"mb-4 h-12 w-12 text-muted-foreground"}),l[3]||(l[3]=c("h3",{class:"mb-2 text-lg font-semibold"},"No roles yet",-1)),l[4]||(l[4]=c("p",{class:"mb-4 text-center text-sm text-muted-foreground"}," Create roles to assign to users (e.g. Admin, Editor). ",-1)),o(e(C),{"as-child":""},{default:a(()=>[o(e(y),{href:e(E)().url},{default:a(()=>[o(e(V),{class:"mr-2 h-4 w-4"}),l[2]||(l[2]=k(" Add Role ",-1))]),_:1},8,["href"])]),_:1})]))])]),_:1})],64))}});export{Pe as default};
